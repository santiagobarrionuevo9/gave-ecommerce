<div class="container py-4">
  <h3>Mis pedidos</h3>

  <!-- Estados -->
  <div *ngIf="loading()">Cargando...</div>
  <div *ngIf="error && !loading()" class="alert alert-danger">{{ error }}</div>

  <!-- Lista de pedidos -->
  <ng-container *ngIf="!loading() && !error">
    <div *ngIf="orders.length === 0" class="alert alert-info">
      Aún no tenés pedidos.
    </div>

    <div *ngFor="let o of orders" class="card mb-2">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <strong>#{{ o.id }}</strong> · {{ o.status }} · {{ o.createdAt | date:'short' }}
            <div class="text-muted small" *ngIf="o.deliveryMethod === 'DELIVERY'">
              Envío a: {{ o.address?.street }} {{ o.address?.number }}, {{ o.address?.city }}
            </div>
          </div>
          <div class="fw-semibold">$ {{ o.grandTotal | number:'1.0-0' }}</div>
        </div>
        <ul class="small mt-2 mb-0">
          <li *ngFor="let it of o.items">
            {{ it.quantity }} × {{ it.productName }} — $ {{ it.lineTotal | number:'1.0-0' }}
          </li>
        </ul>
      </div>
    </div>
  </ng-container>
</div>
